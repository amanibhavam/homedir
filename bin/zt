#!/usr/bin/env bash

function main {
  local nm="$1"; shift

  if [[ "$#" -gt 0 ]]; then
    case "$1" in
      shell)
        multipass shell "${nm}"
        ;;
      exec)
        multipass exec "${nm}" -- "$@"
        ;;
      *)
        export _K_CONTEXT="${nm}"
        "$@"
        unset _K_CONTEXT
        ;;
    esac
  else
    kubectx "${nm}"
  fi
}

main "$@"
